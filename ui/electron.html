<html>
<head>
  <title>Awesome Electron-based Amazon prime cheker notifier</title>
</head>
<body>
  <h1>Nintendo Switch Amazon Prime Now Stock Checker</h1><br />
  <div>Set Zip code, and Update frequency in seconds to start checking</div>
  <form>
    <div>
      <label>Zip Code</label>
      <input type='text' id="zipCode" />
    </div>
    <div>
      <label>Update Interval</label>
      <input type="text" id="updateTime" />
    </div>
  <button id="startButton">Start Checking!</button>
</body>
<script type="text/javascript">
var path = require('path')
const {ipcRenderer} = require('electron')

ipcRenderer.on('stock-update', (event, arg) => {
  console.log(arg)
  const notification = new Notification(options[1].title, options[1]);
})

var options = [
  {
    title: "Basic Notification",
    body: "Short message part"
  },
  {
    title: "Content-Image Notification",
    body: "Short message plus a custom content image",
    icon: path.join(__dirname, 'ui', 'images', 'trayIcon@2x.png')
  }
]

function startChecking() {
  let zipCode = document.querySelector('#zipCode').value;
  let updateTime = document.querySelector('#updateTime').value;

  console.log(zipCode + ' at ' + updateTime)

  if (zipCode === '' || updateTime === '') {
    alert('You have to fill in the fields first!');
  }
  else {
    ipcRenderer.send('start-checking', {zipCode, updateTime})
  }

}

const startButtonClickListener = document.querySelector('#startButton')
        .addEventListener('click', (evt) => {
          evt.preventDefault();
          startChecking();
        })

</script>
</html>
